{% extends "CondorsTnMallBundle::ResponsableLayouts/Layout.html.twig" %}





{% block quickProfile %}
    {{ include('CondorsTnMallBundle::Responsable/quickProfile.html.twig') }}
{% endblock quickProfile %}



{% block nav_menu %}

    {{ include('CondorsTnMallBundle::Responsable/navMenu.html.twig') }}

{% endblock nav_menu %}




{% block Content %}

<div class="page-title">
    <div class="title_left">
        <h3>Packs Management</h3>
    </div>


    <div class="title_right">
        <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
            <input id="prodsearch" type="text" class="form-control" placeholder="Search for...">
        </div>
    </div>
</div>




<div class="">

    <div class="clearfix"></div>

    <div class="row">


        {% endblock Content %}


        {% block footer %}
            {{ include('CondorsTnMallBundle::Responsable/footer.html.twig') }}
        {% endblock footer %}









        {% block otherScript %}

            <div id="custom_notifications" class="custom-notifications dsp_none">
                <ul class="list-unstyled notifications clearfix" data-tabbed_notifications="notif-group">
                </ul>
                <div class="clearfix"></div>
                <div id="notif-group" class="tabbed_notifications"></div>
            </div>



            <!-- bootstrap progress js -->
            <script src="{{ asset('responsable/js/progressbar/bootstrap-progressbar.min.js') }}"></script>
            <script src="{{ asset('responsable/js/nicescroll/jquery.nicescroll.min.js') }}"></script>
            <!-- icheck -->
            <script src="{{ asset('responsable/js/icheck/icheck.min.js') }}"></script>

            <script src="{{ asset('responsable/js/custom.js') }}"></script>

            <!-- form wizard -->
            <script type="text/javascript" src="{{ asset('responsable/js/wizard/jquery.smartWizard.js') }}"></script>
            <!-- pace -->
            <script src="{{ asset('responsable/js/pace/pace.min.js') }}"></script>

            <script type="text/javascript">
                $("document").ready(function () {
                    $("#prodsearch").keydown(function () {

                        $.ajax({
                            type: 'get',
                            url: 'http://localhost/TunisiaMall/web/app_dev.php/user-responsable/products/searchProd/' + $("#prodsearch").val(),
                            beforeSend: function () {
                                console.log('searching ...');
                            },
                            success: function (data) {


                                var trHTML = '';
                                $.each(data, function (i, item) {
                                    var pr = ((item.tvaProduit * item.prixProduit) / 100) + item.prixProduit;

                                    trHTML += "<tr class='even pointer'><td>" + item.refProduit + "</td><td><img width='30' heigth='30' src='{{ asset('uploads/pictures/') }}" + item.imageprodreel + " ' </td><td>" + item.libelleProduit + "</td><td>" + item.categorieProduit + "</td><td>" + item.prixProduit + " D.T </td><td>" + item.tvaProduit + "%</td><td>" + pr + " D.T</td>\n\
                            <td class='last'><a data-toggle='modal' data-target='.bs-example" + item.idProduit + "-modal-lg' 'href='#'><i style='font-size:22px;' class='fa fa-cog'></i></a> &nbsp;&nbsp; <a href=\n\
                                'http://localhost/TunisiaMall/web/app_dev.php/user-responsable/products/delete/" + item.idProduit + "'><i style='font-size:22px;' class='fa fa-trash'></i></a></tr>";
                                });
                                $('#records_table').html(trHTML);

                                console.log('Ok ...');
                            }
                        });

                    });
                });
            </script>

            <script type="text/javascript">
                $(document).ready(function () {


                    $("#enseigne_submit").hide();

                    // Smart Wizard
                    $('#wizard').smartWizard({
                        transitionEffect: 'fade'
                    });


                    $("#sender").click(function () {
                        $("#enseigne_submit").click();

                        $("textarea").val($("#placeHolder").Editor("getText"));
                        return false;
                    });


                });

                $(document).ready(function () {
                    // Smart Wizard
                    $('#wizard_verticle').smartWizard({
                        transitionEffect: 'slideleft'
                    });
                });

            </script>


            <!-- Editor Zone -->
            <script src="{{ asset('responsable/js/ckeditor/ckeditor.js') }}"></script>

            <script type="text/javascript">

                // Replace the <textarea id="editor1"> with a CKEditor
                // instance, using default configuration.
                CKEDITOR.replace('enseigne_descriptionenseigne');

            </script>

            <!-- dropzone -->
            <script src="{{ asset('responsable/js/dropzone/dropzone.js') }}"></script>



            <script>
                $(document).ready(function () {
                    $('input.tableflat').iCheck({
                        checkboxClass: 'icheckbox_flat-green',
                        radioClass: 'iradio_flat-green'
                    });
                });

                var asInitVals = new Array();
                $(document).ready(function () {
                    var oTable = $('#example').dataTable({
                        "oLanguage": {
                            "sSearch": "Search all columns:"
                        },
                        "aoColumnDefs": [{
                            'bSortable': false,
                            'aTargets': [0]
                        } //disables sorting for column one
                        ],
                        'iDisplayLength': 12,
                        "sPaginationType": "full_numbers",
                        "dom": 'T<"clear">lfrtip',
                        "tableTools": {
                            "sSwfPath": "js/datatables/tools/swf/copy_csv_xls_pdf.swf"
                        }
                    });
                    $("tfoot input").keyup(function () {
                        /* Filter on the column based on the index of this element's parent <th> */
                        oTable.fnFilter(this.value, $("tfoot th").index($(this).parent()));
                    });
                    $("tfoot input").each(function (i) {
                        asInitVals[i] = this.value;
                    });
                    $("tfoot input").focus(function () {
                        if (this.className == "search_init") {
                            this.className = "";
                            this.value = "";
                        }
                    });
                    $("tfoot input").blur(function (i) {
                        if (this.value == "") {
                            this.className = "search_init";
                            this.value = asInitVals[$("tfoot input").index(this)];
                        }
                    });
                });
            </script>



        {% endblock otherScript %}

